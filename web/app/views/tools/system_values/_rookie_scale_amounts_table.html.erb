<% rows ||= [] %>
<% selected_year ||= nil %>

<section data-show="$showrookiescales" class="space-y-2">
  <div class="text-xs font-medium uppercase tracking-wide text-muted-foreground">Rookie Scale Amounts</div>

  <% if rows.empty? %>
    <div class="p-3 rounded-lg bg-muted/30 border border-border/50 text-sm text-muted-foreground italic">No rows in selected range.</div>
  <% else %>
    <div class="overflow-x-auto rounded-lg border border-border">
      <table class="min-w-full text-xs font-mono tabular-nums">
        <thead class="bg-muted/40 text-[10px] uppercase tracking-wide text-muted-foreground/90">
          <tr>
            <th class="text-left px-3 py-2 font-medium">Year</th>
            <th class="text-right px-3 py-2 font-medium">Pick</th>
            <th class="text-right px-3 py-2 font-medium">Year 1</th>
            <th class="text-right px-3 py-2 font-medium">Year 2</th>
            <th class="text-right px-3 py-2 font-medium">Option Y3</th>
            <th class="text-right px-3 py-2 font-medium">Option Y4</th>
            <th class="text-right px-3 py-2 font-medium">Y3 %</th>
            <th class="text-right px-3 py-2 font-medium">Y4 %</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-border">
          <% rows.each do |row| %>
            <% highlighted = row["salary_year"].to_i == selected_year.to_i %>
            <tr class="<%= highlighted ? 'bg-yellow-50/70 dark:bg-yellow-900/10' : '' %>">
              <td class="px-3 py-2"><%= row["salary_year"] %></td>
              <td class="px-3 py-2 text-right"><%= row["pick_number"] %></td>
              <td class="px-3 py-2 text-right"><%= format_compact_currency(row["salary_year_1"]) %></td>
              <td class="px-3 py-2 text-right"><%= format_compact_currency(row["salary_year_2"]) %></td>
              <td class="px-3 py-2 text-right"><%= format_compact_currency(row["option_amount_year_3"]) %></td>
              <td class="px-3 py-2 text-right"><%= format_compact_currency(row["option_amount_year_4"]) %></td>
              <td class="px-3 py-2 text-right"><%= row["option_pct_year_3"].present? ? format("%.3f", row["option_pct_year_3"].to_f) : "—" %></td>
              <td class="px-3 py-2 text-right"><%= row["option_pct_year_4"].present? ? format("%.3f", row["option_pct_year_4"].to_f) : "—" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</section>
