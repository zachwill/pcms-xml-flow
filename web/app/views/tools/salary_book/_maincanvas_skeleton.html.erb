<% team_meta_by_code ||= {} %>

<%
  fallback_team_ids = [
    1610612737, 1610612738, 1610612739, 1610612740, 1610612741,
    1610612742, 1610612743, 1610612744, 1610612745, 1610612746,
    1610612747, 1610612748, 1610612749, 1610612750, 1610612751,
    1610612752, 1610612753, 1610612754, 1610612755, 1610612756,
    1610612757, 1610612758, 1610612759, 1610612760, 1610612761,
    1610612762, 1610612763, 1610612764, 1610612765, 1610612766
  ]

  available_team_ids = team_meta_by_code.values.map { |meta| meta["team_id"] }.compact.uniq
  available_team_ids = fallback_team_ids if available_team_ids.empty?

  selected_team_ids = available_team_ids.shuffle.first(8)

  if selected_team_ids.length < 8
    supplement_ids = (fallback_team_ids - selected_team_ids).shuffle
    selected_team_ids += supplement_ids.first(8 - selected_team_ids.length)
  end

  dot_logo_urls = selected_team_ids.first(8).map { |team_id| team_logo_url(team_id) }
%>

<div class="min-h-full bg-muted/30 dark:bg-muted/20">
  <div class="min-h-[calc(100vh-130px)] flex items-center justify-center px-6 py-10">
    <div class="salarybook-sand-loader" role="status" aria-live="polite" aria-label="Loading salary book">
      <p class="sr-only">Loading salary book data.</p>

      <div class="salarybook-sand-grid" aria-hidden="true">
        <% dot_logo_urls.each_with_index do |logo_url, idx| %>
          <div class="salarybook-sand-dot salarybook-sand-dot-<%= idx + 1 %>">
            <% if logo_url.present? %>
              <img src="<%= logo_url %>" alt="" class="salarybook-sand-logo" loading="eager" decoding="async" />
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
