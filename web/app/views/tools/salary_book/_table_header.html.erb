<%# TableHeader â€” Tailwind port of the React prototype %>

<% salary_years ||= SalaryBookHelper::SALARY_YEARS %>
<% team_code = local_assigns.fetch(:team_code) %>

<div class="border-b border-border bg-background">
  <div
    class="h-8 flex items-center text-xs font-medium text-muted-foreground select-none cursor-default"
  >
    <%# Player column (sticky left) %>
    <div
      class="w-52 shrink-0 pl-4 sticky left-0 z-[2] bg-background relative
             after:absolute after:right-0 after:top-0 after:bottom-0 after:w-px after:bg-border/50"
    >
      <div class="grid grid-cols-[40px_1fr] items-center h-full">
        <div></div>
        <div class="pl-1">Name / Details</div>
      </div>
    </div>

    <%# Year columns %>
    <div
      class="h-full flex"
      data-on:salarybook-setseason="if ($activeteam !== '<%= team_code %>') { $activeteam = '<%= team_code %>'; }; if ($selectedseasonteam !== '<%= team_code %>') { $selectedseasonteam = '<%= team_code %>'; }; if (Number($selectedseason) !== evt.detail.year) { $selectedseason = evt.detail.year; }"
      data-on:mouseleave="if ($selectedseasonteam === '<%= team_code %>' && $selectedseason !== '') { $selectedseason = ''; $selectedseasonteam = ''; }"
      data-on:focusout="if (evt.relatedTarget && !el.contains(evt.relatedTarget) && $selectedseasonteam === '<%= team_code %>' && $selectedseason !== '') { $selectedseason = ''; $selectedseasonteam = ''; }"
    >
      <% salary_years.each do |year| %>
        <div
          class="w-24 h-full shrink-0 flex items-center justify-center tabular-nums text-center transition-colors duration-100 cursor-default select-none"
          data-on:mouseenter="el.dispatchEvent(new CustomEvent('salarybook-setseason', { detail: { year: <%= year %> }, bubbles: true }))"
          data-on:focusin="el.dispatchEvent(new CustomEvent('salarybook-setseason', { detail: { year: <%= year %> }, bubbles: true }))"
          data-class="{ 'bg-yellow-50/70 dark:bg-yellow-900/10 text-foreground': Number($selectedseason) === <%= year %> && $selectedseasonteam === '<%= team_code %>' }"
        ><%= format_year_label(year) %></div>
      <% end %>
    </div>

    <%# Total column %>
    <div class="w-24 tabular-nums text-center font-semibold">Total</div>

    <%# Agent column %>
    <div class="w-40 text-center">Agent</div>
  </div>
</div>
