<% content_for :title, "Teams" %>

<main class="max-w-5xl mx-auto px-4 py-6 space-y-6">
  <header class="flex items-start justify-between gap-6 border-b border-border pb-4">
    <div class="min-w-0">
      <h1 class="text-2xl font-semibold truncate">Teams</h1>
      <p class="mt-1 text-sm text-muted-foreground">NBA teams from <code>pcms.teams</code>.</p>
    </div>

    <nav class="shrink-0 flex items-center gap-4">
      <a href="/players" class="text-sm text-muted-foreground hover:text-foreground hover:underline">Players</a>
      <a href="/agents" class="text-sm text-muted-foreground hover:text-foreground hover:underline">Agents</a>
      <a href="/tools/salary-book" class="text-sm text-muted-foreground hover:text-foreground hover:underline">Salary Book</a>
    </nav>
  </header>

  <section class="space-y-3">
    <h2 class="text-xs font-medium uppercase tracking-wide text-muted-foreground">All teams</h2>

    <div class="overflow-x-auto rounded-lg border border-border">
      <table class="min-w-full text-sm">
        <thead class="bg-muted/50 text-xs text-muted-foreground">
          <tr>
            <th class="text-left px-3 py-2 font-medium">Code</th>
            <th class="text-left px-3 py-2 font-medium">Team</th>
            <th class="text-left px-3 py-2 font-medium">Conference</th>
            <th class="text-right px-3 py-2 font-medium">team_id</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-border">
          <% @teams.each do |t| %>
            <% code = t["team_code"].to_s %>
            <tr class="hover:bg-muted/30">
              <td class="px-3 py-2 font-mono tabular-nums">
                <a href="/teams/<%= code.downcase %>" class="font-medium hover:underline"><%= code %></a>
              </td>
              <td class="px-3 py-2">
                <a href="/teams/<%= code.downcase %>" class="hover:underline"><%= t["team_name"] %></a>
              </td>
              <td class="px-3 py-2 text-muted-foreground"><%= t["conference_name"] || "â€”" %></td>
              <td class="px-3 py-2 text-right font-mono tabular-nums text-muted-foreground"><%= t["team_id"] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <p class="text-xs text-muted-foreground">
      Team pages are slug-first. For NBA teams we treat the slug as the team code (ex: <code>/teams/bos</code>) and bootstrap the slug registry on first visit.
    </p>
  </section>
</main>
