<%
  active_destination = local_assigns[:active_destination].to_s
  valid_destinations = %w[salary_book system_values team_summary two_way_utility agents draft draft_selections players teams trades transactions noah]
  active_destination = "salary_book" unless valid_destinations.include?(active_destination)
%>

<div class="w-48 shrink-0 space-y-1">
  <div class="text-[10px] font-semibold uppercase tracking-wider text-muted-foreground/70">Navigation</div>

  <div class="space-y-3">
    <select
      data-commandbar-nav-select
      aria-label="Navigate workspace"
      class="h-7 w-full rounded border border-border bg-muted/50 px-2 text-xs text-foreground outline-none focus-visible:border-foreground"
    >
      <option value="/" <%= "selected" if active_destination == "salary_book" %>>Salary Book</option>

      <optgroup label="PCMS">
        <option value="/system-values" <%= "selected" if active_destination == "system_values" %>>System Values</option>
        <option value="/team-summary" <%= "selected" if active_destination == "team_summary" %>>Team Summary</option>
        <option value="/two-way-utility" <%= "selected" if active_destination == "two_way_utility" %>>Two-Way Utility</option>
      </optgroup>

      <optgroup label="NBA">
        <option value="/agents" <%= "selected" if active_destination == "agents" %>>Agents</option>
        <option value="/drafts" <%= "selected" if active_destination == "draft" %>>Draft</option>
        <option value="/draft-selections" <%= "selected" if active_destination == "draft_selections" %>>Draft Selections</option>
        <option value="/players" <%= "selected" if active_destination == "players" %>>Players</option>
        <option value="/teams" <%= "selected" if active_destination == "teams" %>>Teams</option>
        <option value="/trades" <%= "selected" if active_destination == "trades" %>>Trades</option>
        <option value="/transactions" <%= "selected" if active_destination == "transactions" %>>Transactions</option>
      </optgroup>

      <optgroup label="Rip City">
        <option value="/ripcity/noah" <%= "selected" if active_destination == "noah" %>>Noah</option>
      </optgroup>
    </select>

    <label class="flex items-center gap-1.5 cursor-pointer select-none">
      <input
        type="checkbox"
        data-commandbar-dark-toggle
        class="size-3.5 accent-primary"
      />
      <span class="text-[11px] leading-none text-foreground/80">Dark Mode</span>
    </label>

    <% if user_signed_in? %>
      <div class="space-y-1 pt-1 border-t border-border/80">
        <div class="text-[10px] text-muted-foreground truncate"><%= current_user.email %></div>
        <div class="flex items-center justify-between gap-2">
          <span class="inline-flex items-center rounded border border-border px-1.5 py-0.5 text-[10px] uppercase tracking-wide text-muted-foreground"><%= current_user.role %></span>
          <%= button_to "Sign out",
            logout_path,
            method: :delete,
            class: "text-[10px] text-foreground/80 hover:text-foreground underline cursor-pointer" %>
        </div>
      </div>
    <% end %>
  </div>
</div>
