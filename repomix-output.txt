This file is a merged representation of the entire codebase, combined into a single document by Repomix.

================================================================
File Summary
================================================================

Purpose:
--------
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

File Format:
------------
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A separator line (================)
  b. The file path (File: path/to/file)
  c. Another separator line
  d. The full contents of the file
  e. A blank line

Usage Guidelines:
-----------------
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

Notes:
------
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)


================================================================
Directory Structure
================================================================
components/
  SalaryBook.tsx
  Sidebar.tsx
  TopBar.tsx
services/
  gemini.ts
.gitignore
App.tsx
constants.tsx
index.html
index.tsx
metadata.json
package.json
README.md
tsconfig.json
types.ts
vite.config.ts

================================================================
Files
================================================================

================
File: components/SalaryBook.tsx
================
import React from 'react';
import { Team, Player, DraftPick } from '../types';
import { YEARS } from '../constants';
import { TrendingUp, Users, Ticket, Activity, Info } from 'lucide-react';

interface SalaryBookProps {
  team: Team;
  players: Player[];
  picks: DraftPick[];
  onEntityClick: (type: any, id: string, data: any) => void;
  isActive: boolean;
}

const formatCurrency = (val: number) => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    maximumFractionDigits: 0,
  }).format(val);
};

// Fixed height constants for sticky alignment
const TEAM_HEADER_HEIGHT = 88; // Based on p-5 + large text + subtitle
const TABLE_HEADER_ROW1_HEIGHT = 33; // Primary header
const TABLE_HEADER_ROW2_HEIGHT = 40; // Sub-header

export const SalaryBook: React.FC<SalaryBookProps> = ({ team, players, picks, onEntityClick, isActive }) => {
  const totals = YEARS.map((year) => 
    players.reduce((sum, p) => sum + (p.contracts.find(c => c.year === year)?.amount || 0), 0)
  );

  return (
    <div 
      className={`mb-16 transition-all duration-700 rounded-xl border ${isActive ? 'border-blue-500 shadow-[0_0_40px_rgba(37,99,235,0.15)] ring-1 ring-blue-400/50' : 'border-slate-800/50 opacity-80 grayscale-[0.2]'}`}
      id={`team-${team.id}`}
      data-team-id={team.id}
    >
      {/* 
        Sticky Team Header Section 
        This is the "Contacts App" style section header.
      */}
      <div 
        className="sticky top-0 z-[60] bg-slate-900 p-5 border-b border-slate-800 flex items-center justify-between rounded-t-xl h-[88px]"
      >
        <div className="flex items-center gap-5">
          <span className="text-4xl filter drop-shadow-md">{team.logo}</span>
          <div>
            <h2 
              className="text-2xl font-black text-white cursor-pointer hover:text-blue-400 tracking-tight transition-colors"
              onClick={() => onEntityClick('TEAM', team.id, team)}
            >
              {team.name.toUpperCase()}
            </h2>
            <div className="flex items-center gap-2 mt-0.5">
              <span className="px-1.5 py-0.5 bg-slate-800 text-slate-400 text-[9px] font-bold rounded">{team.conference}</span>
              <span className="w-1 h-1 bg-slate-700 rounded-full" />
              <p className="text-[10px] text-slate-500 font-medium tracking-wide">ROSTER SIZE: {players.length}</p>
            </div>
          </div>
        </div>
        <div className="flex gap-8">
          <div className="text-right">
            <p className="text-[9px] text-slate-500 font-black uppercase tracking-widest mb-1">Taxable Salary</p>
            <p className="text-xl font-mono font-bold text-emerald-400">{formatCurrency(totals[0])}</p>
          </div>
        </div>
      </div>

      <div className="overflow-x-auto bg-slate-950/50 relative">
        <table className="w-full text-left text-[10px] border-collapse min-w-[1200px]">
          <thead>
            {/* Primary Header Row - Sticks below Team Header */}
            <tr className="bg-slate-900 text-slate-500 font-black uppercase tracking-widest border-b border-slate-800 sticky top-[88px] z-50">
              <th 
                colSpan={3} 
                className="py-2 px-4 border-r border-slate-800 text-center text-[9px] sticky left-0 bg-slate-900 z-[70] min-w-[280px]"
              >
                Player Information
              </th>
              <th colSpan={5} className="py-2 px-4 border-r border-slate-800 text-center text-[9px]">Contract Projections</th>
              <th className="py-2 px-4 text-center text-[9px]">Management</th>
            </tr>
            {/* Sub Header Row - Sticks below Primary Header */}
            <tr className="bg-slate-950 text-slate-600 font-bold uppercase tracking-tighter border-b border-slate-800 sticky top-[121px] z-50">
              <th className="py-3 px-4 w-48 sticky left-0 bg-slate-950 z-[70] border-r border-slate-800/20">Full Name</th>
              <th className="py-3 px-4 w-12 text-center sticky left-[192px] bg-slate-950 z-[70] border-r border-slate-800/20">Pos</th>
              <th className="py-3 px-4 w-20 border-r border-slate-800 text-center sticky left-[240px] bg-slate-950 z-[70]">Exp / Age</th>
              {YEARS.map(y => (
                <th key={y} className="py-3 px-4 text-right border-r border-slate-800/10 last:border-0">{y}</th>
              ))}
              <th className="py-3 px-4 text-right border-l border-slate-800 bg-slate-950">Agent / Agency</th>
            </tr>
          </thead>
          <tbody>
            {players.map((player, pIdx) => {
              const rowBg = pIdx % 2 === 0 ? 'bg-[#0f172a]' : 'bg-[#020617]';
              return (
                <React.Fragment key={player.id}>
                  {/* Row 1: Key Info & Salary */}
                  <tr 
                    className={`group cursor-pointer transition-colors hover:bg-blue-900/20 ${rowBg}`}
                    onClick={() => onEntityClick('PLAYER', player.id, player)}
                  >
                    <td className={`py-2 px-4 align-bottom sticky left-0 z-20 ${rowBg} group-hover:bg-blue-900/20 border-r border-slate-800/20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]`}>
                      <span className="text-slate-200 font-bold text-[11px] group-hover:text-blue-300 transition-colors uppercase tracking-tight whitespace-nowrap">{player.name}</span>
                    </td>
                    <td className={`py-2 px-4 align-bottom text-center sticky left-[192px] z-20 ${rowBg} group-hover:bg-blue-900/20 border-r border-slate-800/20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]`}>
                      <span className="px-1.5 py-0.5 bg-slate-800 text-slate-400 rounded text-[9px] font-bold">{player.position}</span>
                    </td>
                    <td className={`py-2 px-4 align-bottom text-center border-r border-slate-800/50 text-slate-500 font-mono sticky left-[240px] z-20 ${rowBg} group-hover:bg-blue-900/20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]`}>
                      8 / 26
                    </td>
                    {YEARS.map(year => {
                      const contract = player.contracts.find(c => c.year === year);
                      const isOption = contract?.status.includes('Option');
                      return (
                        <td key={year} className={`py-2 px-4 text-right align-bottom font-mono font-bold border-r border-slate-800/10 ${isOption ? 'text-blue-400' : 'text-slate-300'}`}>
                          {contract ? formatCurrency(contract.amount) : '‚Äî'}
                        </td>
                      );
                    })}
                    <td className="py-2 px-4 text-right align-bottom border-l border-slate-800/50 bg-inherit">
                      <span className="text-slate-400 font-medium group-hover:text-slate-200 whitespace-nowrap">{player.agent}</span>
                    </td>
                  </tr>
                  {/* Row 2: Metadata Sub-row */}
                  <tr 
                    className={`group cursor-pointer border-b border-slate-800/30 transition-colors hover:bg-blue-900/20 ${rowBg}`}
                    onClick={() => onEntityClick('PLAYER', player.id, player)}
                  >
                    <td className={`pb-2 px-4 sticky left-0 z-20 ${rowBg} group-hover:bg-blue-900/20 border-r border-slate-800/20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]`}>
                      <div className="flex gap-2">
                        <span className="text-[8px] text-slate-600 font-bold uppercase tracking-widest">Guaranteed %</span>
                        <span className="text-[8px] text-emerald-500 font-bold">100%</span>
                      </div>
                    </td>
                    <td colSpan={2} className={`pb-2 px-4 border-r border-slate-800/50 sticky left-[192px] z-20 ${rowBg} group-hover:bg-blue-900/20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]`}>
                      <span className="text-[9px] text-slate-600 italic">Unrestricted Free Agent ('29)</span>
                    </td>
                    {YEARS.map((year, idx) => {
                      const contract = player.contracts.find(c => c.year === year);
                      const isOption = contract?.status.includes('Option');
                      return (
                        <td key={year + '-meta'} className="pb-2 px-4 text-right border-r border-slate-800/10">
                          {isOption && <span className="text-[8px] bg-blue-950 text-blue-400 px-1 rounded font-black uppercase tracking-tighter">Option</span>}
                          {idx === 0 && !isOption && <span className="text-[8px] text-slate-700 font-bold uppercase tracking-tighter">Bird Rights</span>}
                        </td>
                      );
                    })}
                    <td className="pb-2 px-4 text-right border-l border-slate-800/50 bg-inherit">
                      <span 
                        className="text-[9px] text-slate-600 hover:text-blue-400 transition-colors whitespace-nowrap"
                        onClick={(e) => {
                          e.stopPropagation();
                          onEntityClick('AGENT', player.agent, { name: player.agent, agency: player.agency });
                        }}
                      >
                        {player.agency}
                      </span>
                    </td>
                  </tr>
                </React.Fragment>
              );
            })}
            
            {/* Picks Row with double layout */}
            <tr className="bg-slate-900/40 border-t border-slate-700">
              <td colSpan={3} className="py-4 px-4 text-slate-400 font-black uppercase text-[9px] tracking-widest border-r border-slate-800 sticky left-0 bg-slate-900/95 z-20 shadow-[2px_0_5px_rgba(0,0,0,0.3)]">
                Incoming Draft Assets
              </td>
              {YEARS.map((year) => {
                const yearInt = parseInt(year.split('-')[0]) + 1;
                const yearPicks = picks.filter(p => p.year === yearInt);
                return (
                  <td key={year} className="py-2 px-4 text-right border-r border-slate-800/10">
                    <div className="flex flex-col gap-1 items-end">
                      {yearPicks.map(p => (
                        <div 
                          key={p.id}
                          className="bg-slate-800/80 text-[8px] px-2 py-0.5 rounded border border-slate-700 cursor-pointer hover:bg-slate-600 transition-colors font-bold text-slate-400 uppercase tracking-tighter"
                          onClick={(e) => {
                            e.stopPropagation();
                            onEntityClick('PICK', p.id, p);
                          }}
                        >
                          {p.description}
                        </div>
                      ))}
                    </div>
                  </td>
                );
              })}
              <td className="border-l border-slate-800"></td>
            </tr>
          </tbody>
          <tfoot className="sticky bottom-0 z-50 bg-slate-900">
            <tr className="text-slate-400 font-bold border-t-2 border-slate-700">
              <td colSpan={3} className="py-5 px-4 text-[10px] uppercase tracking-widest border-r border-slate-800 sticky left-0 bg-slate-900 z-[70] shadow-[2px_0_5px_rgba(0,0,0,0.3)]">
                Total Committed Obligations
              </td>
              {totals.map((total, i) => (
                <td key={i} className="py-5 px-4 text-right font-mono text-white text-[13px] font-black border-r border-slate-800/10">
                  {formatCurrency(total)}
                </td>
              ))}
              <td className="border-l border-slate-800"></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  );
};

================
File: components/Sidebar.tsx
================
import React, { useState, useEffect } from 'react';
import { EntitySelection, SidebarState, Team, Player, Agent, DraftPick, TeamStats } from '../types';
import { ArrowLeft, BrainCircuit, ShieldCheck, TrendingUp, Info, Users, Briefcase, FileText, BarChart3, Wallet } from 'lucide-react';
import { getPlayerAnalysis, getTeamOutlook, getTeamStatAnalysis } from '../services/gemini';
import { generateMockTeamStats } from '../constants';

interface SidebarProps {
  state: SidebarState;
  onBack: () => void;
  activeTeam?: Team;
  allPlayers: Player[];
}

type TeamViewMode = 'OUTLOOK' | 'STATS';

export const Sidebar: React.FC<SidebarProps> = ({ state, onBack, activeTeam, allPlayers }) => {
  const current = state.history[state.currentIndex];
  const [aiAnalysis, setAiAnalysis] = useState<string | null>(null);
  const [isAnalyzing, setIsAnalyzing] = useState(false);
  const [teamViewMode, setTeamViewMode] = useState<TeamViewMode>('OUTLOOK');

  useEffect(() => {
    const fetchAI = async () => {
      // If we have an entity selected, prioritize its analysis
      if (current) {
        setIsAnalyzing(true);
        setAiAnalysis(null);
        let res = "";
        if (current.type === 'PLAYER') {
          const p = current.data as Player;
          res = await getPlayerAnalysis(p.name, p.teamId, p.contracts);
        } else if (current.type === 'TEAM') {
          const t = current.data as Team;
          const teamPlayers = allPlayers.filter(p => p.teamId === t.id);
          res = await getTeamOutlook(t.name, teamPlayers);
        }
        setAiAnalysis(res);
        setIsAnalyzing(false);
      } else if (activeTeam) {
        // Fallback to active team context analysis if no entity selected
        setIsAnalyzing(true);
        setAiAnalysis(null);
        let res = "";
        if (teamViewMode === 'OUTLOOK') {
          const teamPlayers = allPlayers.filter(p => p.teamId === activeTeam.id);
          res = await getTeamOutlook(activeTeam.name, teamPlayers);
        } else {
          const stats = generateMockTeamStats(activeTeam.id);
          res = await getTeamStatAnalysis(activeTeam.name, stats);
        }
        setAiAnalysis(res);
        setIsAnalyzing(false);
      }
    };

    fetchAI();
  }, [current, activeTeam, teamViewMode, allPlayers]);

  const renderPlayer = (player: Player) => (
    <div className="flex flex-col gap-6 animate-in fade-in slide-in-from-right-4 duration-500">
      <div className="flex items-center gap-5 p-4 bg-slate-800/20 rounded-2xl border border-slate-700/30">
        <div className="w-20 h-20 bg-slate-950 rounded-2xl flex items-center justify-center text-4xl shadow-2xl ring-1 ring-slate-800">
          üë§
        </div>
        <div>
          <h2 className="text-2xl font-black text-white leading-tight uppercase tracking-tighter">{player.name}</h2>
          <div className="flex items-center gap-2 mt-1">
            <span className="text-blue-400 font-bold text-sm tracking-widest">{player.position}</span>
            <span className="w-1 h-1 bg-slate-700 rounded-full" />
            <span className="text-slate-500 text-xs font-bold uppercase">{player.teamId}</span>
          </div>
        </div>
      </div>

      <div className="grid grid-cols-2 gap-3">
        <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl shadow-inner">
          <p className="text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1 flex items-center gap-1.5">
            <Briefcase size={10} /> Agency
          </p>
          <p className="text-sm text-slate-200 font-bold leading-none">{player.agency}</p>
        </div>
        <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl shadow-inner">
          <p className="text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1 flex items-center gap-1.5">
            <FileText size={10} /> Experience
          </p>
          <p className="text-sm text-slate-200 font-bold leading-none">8 Years</p>
        </div>
      </div>

      <div className="bg-blue-600/5 border border-blue-500/20 p-5 rounded-2xl relative overflow-hidden group">
        <div className="absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity">
          <BrainCircuit size={80} />
        </div>
        <div className="flex items-center gap-2 mb-4">
          <div className="p-1.5 bg-blue-500 rounded-lg">
            <BrainCircuit className="w-4 h-4 text-white" />
          </div>
          <h3 className="text-xs font-black text-blue-400 uppercase tracking-widest">Cap Strategist Insights</h3>
        </div>
        
        {isAnalyzing ? (
          <div className="space-y-3">
            <div className="h-2.5 bg-blue-800/10 rounded-full animate-pulse w-full" />
            <div className="h-2.5 bg-blue-800/10 rounded-full animate-pulse w-5/6" />
            <div className="h-2.5 bg-blue-800/10 rounded-full animate-pulse w-11/12" />
          </div>
        ) : (
          <div className="text-slate-300 text-[13px] leading-relaxed whitespace-pre-line font-medium">
            {aiAnalysis || "Strategic insights loading from Gemini..."}
          </div>
        )}
      </div>

      <div className="bg-slate-900 p-5 rounded-2xl border border-slate-800/50">
        <h3 className="text-[10px] font-black text-slate-500 uppercase mb-4 tracking-widest flex items-center gap-2">
          <TrendingUp className="w-4 h-4 text-emerald-500" /> Market Analytics
        </h3>
        <div className="space-y-3 text-[11px]">
          <div className="flex justify-between items-center py-2 border-b border-slate-800/50">
            <span className="text-slate-500 font-bold uppercase tracking-tight">Contract Percentile</span>
            <span className="text-white font-mono font-bold">88th</span>
          </div>
          <div className="flex justify-between items-center py-2 border-b border-slate-800/50">
            <span className="text-slate-500 font-bold uppercase tracking-tight">Trade Probability</span>
            <span className="text-amber-500 font-mono font-bold">MEDIUM</span>
          </div>
        </div>
      </div>
    </div>
  );

  const renderTeamOutlook = (team: Team) => (
    <div className="space-y-6">
      <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800">
        <h3 className="text-[10px] font-black text-slate-400 uppercase mb-6 tracking-widest flex items-center gap-2">
          <ShieldCheck className="w-4 h-4 text-emerald-400" /> Financial Sustainability
        </h3>
        <div className="space-y-6">
          <div>
            <div className="flex justify-between text-[11px] mb-2 font-black uppercase tracking-tight">
              <span className="text-slate-500">Functional Cap Space</span>
              <span className="text-white font-mono">$12,450,230</span>
            </div>
            <div className="h-3 bg-slate-950 rounded-full p-0.5 border border-slate-800">
              <div className="h-full bg-blue-500 rounded-full shadow-[0_0_10px_rgba(59,130,246,0.3)]" style={{ width: '75%' }} />
            </div>
          </div>
          <div>
            <div className="flex justify-between text-[11px] mb-2 font-black uppercase tracking-tight">
              <span className="text-slate-500">Distance to 2nd Apron</span>
              <span className="text-amber-500 font-mono">$24,120,000</span>
            </div>
            <div className="h-3 bg-slate-950 rounded-full p-0.5 border border-slate-800">
              <div className="h-full bg-amber-500 rounded-full shadow-[0_0_10px_rgba(245,158,11,0.3)]" style={{ width: '45%' }} />
            </div>
          </div>
        </div>
      </div>

      <div className="bg-blue-600/5 border border-blue-500/20 p-5 rounded-2xl">
        <div className="flex items-center gap-2 mb-4">
          <div className="p-1.5 bg-blue-500 rounded-lg">
            <BrainCircuit className="w-4 h-4 text-white" />
          </div>
          <h3 className="text-xs font-black text-blue-400 uppercase tracking-widest">Financial Outlook</h3>
        </div>
        <p className="text-slate-300 text-[13px] leading-relaxed font-medium">
          {isAnalyzing ? "Analyzing team financial trajectory..." : aiAnalysis}
        </p>
      </div>
    </div>
  );

  const renderTeamStats = (team: Team) => {
    const stats = generateMockTeamStats(team.id);
    return (
      <div className="space-y-6">
        <div className="grid grid-cols-2 gap-4">
          <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl shadow-inner">
            <p className="text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1">Record</p>
            <p className="text-lg text-white font-black font-mono">{stats.record}</p>
            <p className="text-[10px] text-slate-500 font-bold">{stats.standing}</p>
          </div>
          <div className="bg-slate-900 border border-slate-800 p-4 rounded-xl shadow-inner">
            <p className="text-[9px] text-slate-500 uppercase font-black tracking-widest mb-1">Last 10</p>
            <p className="text-lg text-white font-black font-mono">{stats.lastTen}</p>
          </div>
        </div>

        <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800">
          <h3 className="text-[10px] font-black text-slate-400 uppercase mb-6 tracking-widest flex items-center gap-2">
            <BarChart3 className="w-4 h-4 text-blue-400" /> Advanced Efficiency
          </h3>
          <div className="space-y-4">
            <div className="flex justify-between items-center py-1 border-b border-slate-800/50">
              <span className="text-[11px] text-slate-500 font-bold uppercase tracking-tight">PPG</span>
              <span className="text-white font-mono font-bold">{stats.ppg}</span>
            </div>
            <div className="flex justify-between items-center py-1 border-b border-slate-800/50">
              <span className="text-[11px] text-slate-500 font-bold uppercase tracking-tight">OPPG</span>
              <span className="text-white font-mono font-bold">{stats.oppg}</span>
            </div>
            <div className="flex justify-between items-center py-1 border-b border-slate-800/50">
              <span className="text-[11px] text-slate-500 font-bold uppercase tracking-tight">Net Rating</span>
              <span className="text-emerald-500 font-mono font-bold">+{stats.netRating}</span>
            </div>
          </div>
        </div>

        <div className="bg-emerald-600/5 border border-emerald-500/20 p-5 rounded-2xl">
          <div className="flex items-center gap-2 mb-4">
            <div className="p-1.5 bg-emerald-500 rounded-lg">
              <BrainCircuit className="w-4 h-4 text-white" />
            </div>
            <h3 className="text-xs font-black text-emerald-400 uppercase tracking-widest">Performance Analysis</h3>
          </div>
          <p className="text-slate-300 text-[13px] leading-relaxed font-medium">
            {isAnalyzing ? "Processing statistical trends..." : aiAnalysis}
          </p>
        </div>
      </div>
    );
  };

  const renderActiveTeamHeader = (team: Team) => (
    <div className="flex flex-col gap-6 animate-in fade-in slide-in-from-right-4 duration-500">
      <div className="flex items-center gap-5 p-6 bg-slate-800/10 rounded-2xl border border-slate-800/50 relative overflow-hidden group">
        <div className="absolute -right-4 -bottom-4 text-8xl opacity-5 group-hover:scale-110 transition-transform duration-700">{team.logo}</div>
        <div className="text-6xl drop-shadow-2xl z-10">{team.logo}</div>
        <div className="z-10">
          <h2 className="text-3xl font-black text-white leading-none uppercase tracking-tighter">{team.name}</h2>
          <p className="text-slate-500 text-xs font-bold uppercase tracking-widest mt-2">{team.conference} CONFERENCE</p>
        </div>
      </div>

      {/* Tabs Toggle */}
      <div className="flex bg-slate-900/50 p-1 rounded-xl border border-slate-800">
        <button 
          onClick={() => setTeamViewMode('OUTLOOK')}
          className={`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${teamViewMode === 'OUTLOOK' ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
        >
          <Wallet size={12} />
          Cap Outlook
        </button>
        <button 
          onClick={() => setTeamViewMode('STATS')}
          className={`flex-1 flex items-center justify-center gap-2 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${teamViewMode === 'STATS' ? 'bg-blue-600 text-white shadow-lg' : 'text-slate-500 hover:text-slate-300'}`}
        >
          <BarChart3 size={12} />
          Team Stats
        </button>
      </div>

      {teamViewMode === 'OUTLOOK' ? renderTeamOutlook(team) : renderTeamStats(team)}
    </div>
  );

  return (
    <div className="h-full flex flex-col bg-slate-950 border-l border-slate-800/50 shadow-[0_0_50px_rgba(0,0,0,0.5)] overflow-hidden">
      <div className="sticky top-0 z-10 bg-slate-950/95 backdrop-blur-xl p-5 border-b border-slate-800 flex items-center justify-between">
        <div className="flex items-center gap-4">
          {state.currentIndex >= 0 && (
            <button 
              onClick={onBack}
              className="group flex items-center gap-2 py-1.5 px-3 bg-slate-900 hover:bg-slate-800 border border-slate-700 rounded-lg text-slate-400 hover:text-white transition-all shadow-sm"
            >
              <ArrowLeft size={14} className="group-hover:-translate-x-0.5 transition-transform" />
              <span className="text-[10px] font-black uppercase tracking-widest">Back</span>
            </button>
          )}
          {state.currentIndex < 0 && (
            <div className="p-2 bg-blue-500/10 rounded-lg text-blue-500">
              <Info size={16} />
            </div>
          )}
          <h1 className="text-[10px] font-black text-slate-500 uppercase tracking-widest">
            {current ? `${current.type} REPORT` : 'INTELLIGENCE HUB'}
          </h1>
        </div>
      </div>

      <div className="p-8 flex-1 overflow-y-auto custom-scrollbar">
        {!current ? (
          activeTeam ? (
            renderActiveTeamHeader(activeTeam)
          ) : (
            <div className="flex flex-col items-center justify-center h-[50vh] text-center space-y-6">
              <div className="w-24 h-24 bg-slate-900 border border-slate-800 rounded-3xl flex items-center justify-center shadow-2xl">
                <BrainCircuit size={48} className="text-slate-700 animate-pulse" />
              </div>
              <div>
                <h3 className="text-slate-200 font-black uppercase tracking-widest text-xs mb-3">System Idle</h3>
                <p className="text-[11px] text-slate-500 max-w-[180px] leading-relaxed mx-auto font-medium">
                  Please scroll to a team or select an entity from the master table to generate contextual analysis.
                </p>
              </div>
            </div>
          )
        ) : (
          <>
            {current.type === 'PLAYER' && renderPlayer(current.data)}
            {current.type === 'TEAM' && renderActiveTeamHeader(current.data)}
            {current.type === 'AGENT' && (
              <div className="space-y-6 animate-in fade-in slide-in-from-right-4 duration-500">
                <div className="flex items-center gap-5 p-6 bg-slate-800/10 rounded-2xl border border-slate-800/50">
                  <div className="w-16 h-16 bg-slate-950 border border-slate-800 rounded-2xl flex items-center justify-center text-4xl shadow-xl">ü§ù</div>
                  <div>
                    <h2 className="text-2xl font-black text-white leading-none uppercase tracking-tighter">{current.data.name}</h2>
                    <p className="text-blue-500 text-[10px] font-black uppercase tracking-widest mt-2">{current.data.agency}</p>
                  </div>
                </div>
                <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800">
                  <h3 className="text-[10px] font-black text-slate-500 uppercase mb-4 tracking-widest flex items-center gap-2">
                    <Users size={12} /> Key Client Base
                  </h3>
                  <div className="grid grid-cols-2 gap-3 text-[10px] text-slate-400 font-bold">
                    <div className="p-3 bg-slate-950 rounded-xl border border-slate-800 text-center">4 Max Level</div>
                    <div className="p-3 bg-slate-950 rounded-xl border border-slate-800 text-center">15 Rotation</div>
                  </div>
                </div>
              </div>
            )}
            {current.type === 'PICK' && (
              <div className="space-y-6 animate-in fade-in slide-in-from-right-4 duration-500">
                <div className="flex items-center gap-5 p-6 bg-emerald-900/5 rounded-2xl border border-emerald-500/10">
                  <div className="w-16 h-16 bg-slate-950 border border-emerald-900/30 rounded-2xl flex items-center justify-center text-4xl shadow-xl">üéüÔ∏è</div>
                  <div>
                    <h2 className="text-2xl font-black text-white leading-none uppercase tracking-tighter">{current.data.year} R{current.data.round}</h2>
                    <p className="text-slate-500 text-[10px] font-bold uppercase tracking-widest mt-2">ORIGIN: {current.data.origin}</p>
                  </div>
                </div>
                <div className="bg-slate-900 p-6 rounded-2xl border border-slate-800 shadow-xl">
                  <h3 className="text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest">Asset Detail</h3>
                  <p className="text-sm text-slate-300 font-medium italic border-l-2 border-emerald-500 pl-4 py-2 bg-emerald-500/5 rounded-r-lg">
                    "{current.data.description}"
                  </p>
                </div>
              </div>
            )}
          </>
        )}
      </div>
    </div>
  );
};

================
File: components/TopBar.tsx
================
import React from 'react';
import { EASTERN_TEAMS, WESTERN_TEAMS } from '../constants';
import { Team } from '../types';

interface TopBarProps {
  selectedTeams: Set<string>;
  toggleTeam: (id: string) => void;
  filters: Record<string, boolean>;
  toggleFilter: (key: string) => void;
  activeTeamId?: string | null;
  onTeamClick: (id: string) => void;
}

const FilterColumn: React.FC<{ title: string; items: string[]; filters: Record<string, boolean>; toggle: (k: string) => void }> = ({ title, items, filters, toggle }) => (
  <div className="flex flex-col gap-1 px-4 border-r border-slate-700 last:border-0">
    <h3 className="text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1">{title}</h3>
    {items.map(item => (
      <label key={item} className="flex items-center gap-2 cursor-pointer group">
        <input 
          type="checkbox" 
          checked={filters[item] || false} 
          onChange={() => toggle(item)}
          className="rounded border-slate-600 bg-slate-800 text-blue-500 focus:ring-blue-500 w-3 h-3"
        />
        <span className="text-[10px] text-slate-400 group-hover:text-white transition-colors">{item}</span>
      </label>
    ))}
  </div>
);

const TeamGrid: React.FC<{ 
  teams: Team[]; 
  selected: Set<string>; 
  toggle: (id: string) => void; 
  label: string;
  activeTeamId?: string | null;
  onTeamClick: (id: string) => void;
}> = ({ teams, selected, toggle, label, activeTeamId, onTeamClick }) => (
  <div className="flex flex-col gap-1">
    <div className="flex items-center gap-2 px-2">
      <span className="text-[9px] font-black text-slate-600 uppercase tracking-tighter">{label}</span>
      <div className="h-[1px] flex-grow bg-slate-800/50" />
    </div>
    <div className="grid grid-cols-5 gap-1 p-1">
      {teams.map(team => {
        const isSelected = selected.has(team.id);
        const isActive = activeTeamId === team.id;
        return (
          <button
            key={team.id}
            onClick={(e) => {
              if (e.shiftKey) toggle(team.id);
              else onTeamClick(team.id);
            }}
            className={`
              flex items-center justify-center py-1.5 px-1 rounded text-[10px] font-bold border transition-all duration-200
              ${isActive 
                ? 'bg-blue-600 border-blue-400 text-white shadow-[0_0_10px_rgba(37,99,235,0.4)] scale-105 z-10' 
                : isSelected 
                  ? 'bg-slate-800 border-slate-600 text-slate-300 hover:border-blue-500/50' 
                  : 'bg-slate-900 border-slate-800/50 text-slate-600 hover:bg-slate-800 hover:text-slate-400'}
            `}
            title={`${team.name} (Shift+Click to Toggle)`}
          >
            {team.abbreviation}
          </button>
        );
      })}
    </div>
  </div>
);

export const TopBar: React.FC<TopBarProps> = ({ selectedTeams, toggleTeam, filters, toggleFilter, activeTeamId, onTeamClick }) => {
  return (
    <div className="bg-slate-900/90 backdrop-blur-md border-b border-slate-800 p-3 shadow-2xl flex flex-col lg:flex-row gap-4 z-50">
      {/* Team Selection Section */}
      <div className="flex flex-col gap-2 flex-grow max-w-4xl">
        <TeamGrid label="Eastern Conference" teams={EASTERN_TEAMS} selected={selectedTeams} toggle={toggleTeam} activeTeamId={activeTeamId} onTeamClick={onTeamClick} />
        <TeamGrid label="Western Conference" teams={WESTERN_TEAMS} selected={selectedTeams} toggle={toggleTeam} activeTeamId={activeTeamId} onTeamClick={onTeamClick} />
      </div>

      {/* Vertical Divider */}
      <div className="hidden lg:block w-[1px] bg-slate-800/50 self-stretch my-2" />

      {/* Filter Columns */}
      <div className="grid grid-cols-3 flex-grow max-w-2xl">
        <FilterColumn 
          title="Display" 
          items={['Cap Holds', 'Exceptions', 'Draft Picks', 'Dead Money']} 
          filters={filters} 
          toggle={toggleFilter}
        />
        <FilterColumn 
          title="Financials" 
          items={['Luxury Tax', '1st Apron', '2nd Apron', 'Cash Sent']} 
          filters={filters} 
          toggle={toggleFilter}
        />
        <FilterColumn 
          title="Contracts" 
          items={['Options', 'Incentives', 'Trade Kickers', 'Two-Way']} 
          filters={filters} 
          toggle={toggleFilter}
        />
      </div>
    </div>
  );
};

================
File: services/gemini.ts
================
import { GoogleGenAI } from "@google/genai";

// Fix: Use process.env.API_KEY directly in the named parameter object as per guidelines
const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });

export const getPlayerAnalysis = async (playerName: string, teamName: string, contracts: any[]) => {
  try {
    const prompt = `Act as an NBA Front Office Strategist. Provide a concise (3-4 bullet points) financial and strategic analysis for ${playerName} on the ${teamName}. 
    Consider their contract: ${JSON.stringify(contracts)}. 
    Focus on trade value, cap impact, and future flexibility. Keep it professional and brief.`;
    
    // Fix: Using gemini-3-flash-preview for text tasks and direct generateContent call
    const response = await ai.models.generateContent({
      model: 'gemini-3-flash-preview',
      contents: prompt,
    });
    
    // Fix: Access .text property directly (not a method)
    return response.text;
  } catch (error) {
    console.error("Gemini Error:", error);
    return "Analysis unavailable at this time.";
  }
};

export const getTeamOutlook = async (teamName: string, players: any[]) => {
  try {
    const prompt = `Act as an NBA Salary Cap Expert. Analyze the current cap situation for the ${teamName}. 
    Based on their top earners: ${players.slice(0, 5).map(p => p.name).join(', ')}.
    Provide a 2-sentence executive summary of their financial outlook for the next 3 seasons.`;
    
    // Fix: Using gemini-3-flash-preview for text tasks and direct generateContent call
    const response = await ai.models.generateContent({
      model: 'gemini-3-flash-preview',
      contents: prompt,
    });
    
    // Fix: Access .text property directly (not a method)
    return response.text;
  } catch (error) {
    console.error("Gemini Error:", error);
    return "Strategic outlook unavailable.";
  }
};

export const getTeamStatAnalysis = async (teamName: string, stats: any) => {
  try {
    const prompt = `Act as an NBA Analytics Expert. Analyze the following team performance metrics for the ${teamName}: ${JSON.stringify(stats)}.
    Provide a concise 2-sentence summary of their competitive standing and one key area of performance concern or strength.`;
    
    const response = await ai.models.generateContent({
      model: 'gemini-3-flash-preview',
      contents: prompt,
    });
    
    return response.text;
  } catch (error) {
    console.error("Gemini Error:", error);
    return "Analytics summary unavailable.";
  }
};

================
File: .gitignore
================
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

================
File: App.tsx
================
import React, { useState, useEffect, useRef, useMemo, useCallback } from 'react';
// Added missing import for the Users icon
import { Users } from 'lucide-react';
import { TopBar } from './components/TopBar';
import { SalaryBook } from './components/SalaryBook';
import { Sidebar } from './components/Sidebar';
import { ALL_TEAMS, generateMockPlayers, generateMockPicks } from './constants';
import { EntitySelection, SidebarState, Team, Player, DraftPick } from './types';

export default function App() {
  const [selectedTeamIds, setSelectedTeamIds] = useState<Set<string>>(new Set(['BOS', 'NYK', 'PHI', 'DAL', 'GSW', 'LAL']));
  const [filters, setFilters] = useState<Record<string, boolean>>({
    'Cap Holds': true,
    'Draft Picks': true,
    'Luxury Tax': true
  });

  const [sidebarState, setSidebarState] = useState<SidebarState>({
    history: [],
    currentIndex: -1
  });

  const [activeTeamIdInViewport, setActiveTeamIdInViewport] = useState<string | null>(null);
  const scrollContainerRef = useRef<HTMLDivElement>(null);

  const teamData = useMemo(() => {
    return [...selectedTeamIds].map(id => {
      const team = ALL_TEAMS.find(t => t.id === id)!;
      return {
        team,
        players: generateMockPlayers(id),
        picks: generateMockPicks(id)
      };
    });
  }, [selectedTeamIds]);

  const allPlayers = useMemo(() => teamData.flatMap(d => d.players), [teamData]);

  const toggleTeam = useCallback((id: string) => {
    setSelectedTeamIds(prev => {
      const next = new Set(prev);
      if (next.has(id)) next.delete(id);
      else next.add(id);
      return next;
    });
  }, []);

  const toggleFilter = useCallback((key: string) => {
    setFilters(prev => ({ ...prev, [key]: !prev[key] }));
  }, []);

  const handleEntityClick = useCallback((type: any, id: string, data: any) => {
    const selection: EntitySelection = { type, id, data };
    setSidebarState(prev => ({
      history: [...prev.history.slice(0, prev.currentIndex + 1), selection],
      currentIndex: prev.currentIndex + 1
    }));
  }, []);

  const handleBack = useCallback(() => {
    setSidebarState(prev => {
      if (prev.currentIndex <= 0) {
        // If at the base of selection history, reset completely to reveal background viewport context
        return {
          history: [],
          currentIndex: -1
        };
      }
      return {
        ...prev,
        currentIndex: prev.currentIndex - 1
      };
    });
  }, []);

  const scrollToTeam = useCallback((id: string) => {
    // If team isn't in selected list, add it first
    if (!selectedTeamIds.has(id)) {
      toggleTeam(id);
      // Give time for DOM to update
      setTimeout(() => {
        const el = document.getElementById(`team-${id}`);
        el?.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }, 100);
    } else {
      const el = document.getElementById(`team-${id}`);
      el?.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  }, [selectedTeamIds, toggleTeam]);

  // Intersection Observer for Scroll Spy
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        // Find the entry that is most visible
        const visible = entries.sort((a, b) => b.intersectionRatio - a.intersectionRatio)[0];
        if (visible && visible.isIntersecting) {
          const teamId = (visible.target as HTMLElement).getAttribute('data-team-id');
          if (teamId) setActiveTeamIdInViewport(teamId);
        }
      },
      { threshold: [0.1, 0.5, 0.9], root: scrollContainerRef.current }
    );

    const elements = document.querySelectorAll('[data-team-id]');
    elements.forEach(el => observer.observe(el));

    return () => observer.disconnect();
  }, [teamData]);

  const activeTeam = useMemo(() => 
    ALL_TEAMS.find(t => t.id === activeTeamIdInViewport),
    [activeTeamIdInViewport]
  );

  return (
    <div className="flex flex-col h-screen bg-[#020617] text-slate-200 overflow-hidden font-sans selection:bg-blue-500/30">
      {/* Top Filter Bar */}
      <TopBar 
        selectedTeams={selectedTeamIds} 
        toggleTeam={toggleTeam} 
        filters={filters}
        toggleFilter={toggleFilter}
        activeTeamId={activeTeamIdInViewport}
        onTeamClick={scrollToTeam}
      />

      {/* Main Content Area */}
      <div className="flex flex-1 overflow-hidden">
        {/* Left Side: Scrollable Salary Books (70%) */}
        <div 
          ref={scrollContainerRef}
          className="w-[70%] h-full overflow-y-auto p-8 space-y-12 custom-scrollbar scroll-smooth"
        >
          {teamData.length === 0 ? (
            <div className="flex flex-col items-center justify-center h-full text-slate-600 border-2 border-dashed border-slate-800/50 rounded-3xl p-12 text-center">
              {/* Users icon is now correctly imported and used */}
              <Users size={48} className="mb-4 opacity-20" />
              <p className="text-xl font-bold tracking-tight mb-2">Front Office Dashboard Ready</p>
              <p className="text-sm max-w-xs text-slate-500">Select teams from the Top Command Center to begin salary book analysis and cap projections.</p>
            </div>
          ) : (
            teamData.map(({ team, players, picks }) => (
              <SalaryBook 
                key={team.id}
                team={team}
                players={players}
                picks={picks}
                isActive={activeTeamIdInViewport === team.id}
                onEntityClick={handleEntityClick}
              />
            ))
          )}
        </div>

        {/* Right Side: Context Sidebar (30%) */}
        <div className="w-[30%] h-full">
          <Sidebar 
            state={sidebarState} 
            onBack={handleBack} 
            activeTeam={activeTeam}
            allPlayers={allPlayers}
          />
        </div>
      </div>

      <style>{`
        .custom-scrollbar::-webkit-scrollbar {
          width: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #020617;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #1e293b;
          border-radius: 20px;
          border: 3px solid #020617;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #334155;
        }
      `}</style>
    </div>
  );
}

================
File: constants.tsx
================
import { Team, Player, DraftPick, TeamStats } from './types';

export const YEARS = ['2024-25', '2025-26', '2026-27', '2027-28', '2028-29'];

export const EASTERN_TEAMS: Team[] = [
  { id: 'BOS', name: 'Boston Celtics', abbreviation: 'BOS', conference: 'Eastern', color: '#007A33', logo: 'üçÄ' },
  { id: 'BKN', name: 'Brooklyn Nets', abbreviation: 'BKN', conference: 'Eastern', color: '#000000', logo: 'üèôÔ∏è' },
  { id: 'NYK', name: 'New York Knicks', abbreviation: 'NYK', conference: 'Eastern', color: '#006BB6', logo: 'üçé' },
  { id: 'PHI', name: 'Philadelphia 76ers', abbreviation: 'PHI', conference: 'Eastern', color: '#006BB6', logo: 'üîî' },
  { id: 'TOR', name: 'Toronto Raptors', abbreviation: 'TOR', conference: 'Eastern', color: '#CE1141', logo: 'ü¶ñ' },
  { id: 'CHI', name: 'Chicago Bulls', abbreviation: 'CHI', conference: 'Eastern', color: '#CE1141', logo: 'üêÇ' },
  { id: 'CLE', name: 'Cleveland Cavaliers', abbreviation: 'CLE', conference: 'Eastern', color: '#860038', logo: '‚öîÔ∏è' },
  { id: 'DET', name: 'Detroit Pistons', abbreviation: 'DET', conference: 'Eastern', color: '#C8102E', logo: '‚öôÔ∏è' },
  { id: 'IND', name: 'Indiana Pacers', abbreviation: 'IND', conference: 'Eastern', color: '#002D62', logo: 'üèéÔ∏è' },
  { id: 'MIL', name: 'Milwaukee Bucks', abbreviation: 'MIL', conference: 'Eastern', color: '#00471B', logo: 'ü¶å' },
  { id: 'ATL', name: 'Atlanta Hawks', abbreviation: 'ATL', conference: 'Eastern', color: '#E03A3E', logo: 'ü¶Ö' },
  { id: 'CHA', name: 'Charlotte Hornets', abbreviation: 'CHA', conference: 'Eastern', color: '#1D1160', logo: 'üêù' },
  { id: 'MIA', name: 'Miami Heat', abbreviation: 'MIA', conference: 'Eastern', color: '#98002E', logo: 'üî•' },
  { id: 'ORL', name: 'Orlando Magic', abbreviation: 'ORL', conference: 'Eastern', color: '#0077C0', logo: 'ü™Ñ' },
  { id: 'WAS', name: 'Washington Wizards', abbreviation: 'WAS', conference: 'Eastern', color: '#002B5C', logo: 'ü™Ñ' },
];

export const WESTERN_TEAMS: Team[] = [
  { id: 'DAL', name: 'Dallas Mavericks', abbreviation: 'DAL', conference: 'Western', color: '#00538C', logo: 'üêé' },
  { id: 'HOU', name: 'Houston Rockets', abbreviation: 'HOU', conference: 'Western', color: '#CE1141', logo: 'üöÄ' },
  { id: 'MEM', name: 'Memphis Grizzlies', abbreviation: 'MEM', conference: 'Western', color: '#5D76A9', logo: 'üêª' },
  { id: 'NOP', name: 'New Orleans Pelicans', abbreviation: 'NOP', conference: 'Western', color: '#0C2340', logo: 'üê¶' },
  { id: 'SAS', name: 'San Antonio Spurs', abbreviation: 'SAS', conference: 'Western', color: '#C4CED4', logo: 'üåµ' },
  { id: 'DEN', name: 'Denver Nuggets', abbreviation: 'DEN', conference: 'Western', color: '#0E2240', logo: '‚õèÔ∏è' },
  { id: 'MIN', name: 'Minnesota Timberwolves', abbreviation: 'MIN', conference: 'Western', color: '#0C2340', logo: 'üê∫' },
  { id: 'OKC', name: 'Oklahoma City Thunder', abbreviation: 'OKC', conference: 'Western', color: '#007AC1', logo: '‚ö°' },
  { id: 'POR', name: 'Portland Trail Blazers', abbreviation: 'POR', conference: 'Western', color: '#E03A3E', logo: 'üåπ' },
  { id: 'UTA', name: 'Utah Jazz', abbreviation: 'UTA', conference: 'Western', color: '#002B5C', logo: 'üé∑' },
  { id: 'GSW', name: 'Golden State Warriors', abbreviation: 'GSW', conference: 'Western', color: '#1D428A', logo: 'üåâ' },
  { id: 'LAC', name: 'LA Clippers', abbreviation: 'LAC', conference: 'Western', color: '#C8102E', logo: '‚õµ' },
  { id: 'LAL', name: 'Los Angeles Lakers', abbreviation: 'LAL', conference: 'Western', color: '#552583', logo: 'üü£' },
  { id: 'PHX', name: 'Phoenix Suns', abbreviation: 'PHX', conference: 'Western', color: '#1D1160', logo: '‚òÄÔ∏è' },
  { id: 'SAC', name: 'Sacramento Kings', abbreviation: 'SAC', conference: 'Western', color: '#5A2D81', logo: 'üëë' },
];

export const ALL_TEAMS = [...EASTERN_TEAMS, ...WESTERN_TEAMS];

export const generateMockTeamStats = (teamId: string): TeamStats => {
  const seed = teamId.charCodeAt(0) + teamId.charCodeAt(1);
  return {
    record: `${40 + (seed % 10)}-${20 + (seed % 15)}`,
    standing: `${(seed % 8) + 1}th in ${seed % 2 === 0 ? 'East' : 'West'}`,
    ppg: 112.4 + (seed % 5),
    oppg: 108.2 + (seed % 4),
    netRating: 4.2 + (seed % 3),
    offensiveRank: (seed % 15) + 1,
    defensiveRank: (seed % 20) + 1,
    lastTen: `${(seed % 5) + 3}-${7 - (seed % 5)}`
  };
};

// Mock Generation Helper
export const generateMockPlayers = (teamId: string): Player[] => {
  const positions = ['PG', 'SG', 'SF', 'PF', 'C'];
  const players: Player[] = [];
  const count = 15;
  
  for (let i = 0; i < count; i++) {
    const baseSalary = 5000000 + Math.random() * 40000000;
    players.push({
      id: `${teamId}-p${i}`,
      name: `Player ${i + 1} (${teamId})`,
      position: positions[Math.floor(Math.random() * positions.length)],
      teamId,
      agent: `Agent ${Math.floor(Math.random() * 10) + 1}`,
      agency: `Agency ${String.fromCharCode(65 + Math.floor(Math.random() * 5))}`,
      contracts: YEARS.map((year, idx) => ({
        year,
        amount: Math.max(2000000, baseSalary * (1 + (idx * 0.08) - (Math.random() * 0.05))),
        status: idx === 0 ? 'Guaranteed' : (Math.random() > 0.8 ? 'Player Option' : 'Guaranteed')
      }))
    });
  }
  return players;
};

export const generateMockPicks = (teamId: string): DraftPick[] => {
  return [
    { id: `${teamId}-pk1`, year: 2025, round: 1, origin: teamId, owner: teamId, description: 'Own 1st' },
    { id: `${teamId}-pk2`, year: 2026, round: 1, origin: 'DET', owner: teamId, description: 'DET 1st (Top-14 Protected)' },
    { id: `${teamId}-pk3`, year: 2027, round: 2, origin: teamId, owner: teamId, description: 'Own 2nd' },
  ];
};

================
File: index.html
================
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Salary Book Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #020617;
      }
      .font-mono {
        font-family: 'JetBrains Mono', monospace;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react/": "https://esm.sh/react@^19.2.3/",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.38.0",
    "lucide-react": "https://esm.sh/lucide-react@^0.563.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>
<script type="module" src="/index.tsx"></script>
</body>
</html>

================
File: index.tsx
================
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const rootElement = document.getElementById('root');
if (!rootElement) {
  throw new Error("Could not find root element to mount to");
}

const root = ReactDOM.createRoot(rootElement);
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

================
File: metadata.json
================
{
  "name": "NBA Salary Book Pro",
  "description": "A high-end front office dashboard for managing NBA team salaries, player contracts, and cap projections with integrated Gemini intelligence.",
  "requestFramePermissions": []
}

================
File: types.ts
================
export type Conference = 'Eastern' | 'Western';

export interface Team {
  id: string;
  name: string;
  abbreviation: string;
  conference: Conference;
  color: string;
  logo: string;
}

export interface TeamStats {
  record: string;
  standing: string;
  ppg: number;
  oppg: number;
  netRating: number;
  offensiveRank: number;
  defensiveRank: number;
  lastTen: string;
}

export type ContractStatus = 'Guaranteed' | 'Partial' | 'Non-Guaranteed' | 'Player Option' | 'Team Option' | 'Qualifying Offer' | 'Two-Way';

export interface ContractYear {
  year: string;
  amount: number;
  status: ContractStatus;
}

export interface Player {
  id: string;
  name: string;
  position: string;
  teamId: string;
  agent: string;
  agency: string;
  contracts: ContractYear[];
  isCapHold?: boolean;
}

export interface DraftPick {
  id: string;
  year: number;
  round: number;
  origin: string;
  owner: string;
  description: string;
}

export interface Agent {
  id: string;
  name: string;
  agency: string;
  clients: string[];
}

export type EntityType = 'PLAYER' | 'TEAM' | 'AGENT' | 'PICK';

export interface EntitySelection {
  type: EntityType;
  id: string;
  data: any;
}

export interface SidebarState {
  history: EntitySelection[];
  currentIndex: number;
}

================
File: vite.config.ts
================
import path from 'path';
import { defineConfig, loadEnv } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig(({ mode }) => {
    const env = loadEnv(mode, '.', '');
    return {
      server: {
        port: 3000,
        host: '0.0.0.0',
      },
      plugins: [react()],
      define: {
        'process.env.API_KEY': JSON.stringify(env.GEMINI_API_KEY),
        'process.env.GEMINI_API_KEY': JSON.stringify(env.GEMINI_API_KEY)
      },
      resolve: {
        alias: {
          '@': path.resolve(__dirname, '.'),
        }
      }
    };
});

================
File: package.json
================
{
  "name": "nba-salary-book-pro",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.2.3",
    "react-dom": "^19.2.3",
    "@google/genai": "^1.38.0",
    "lucide-react": "^0.563.0"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "@vitejs/plugin-react": "^5.0.0",
    "typescript": "~5.8.2",
    "vite": "^6.2.0"
  }
}

================
File: README.md
================
<div align="center">
<img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
</div>

# Run and deploy your AI Studio app

This contains everything you need to run your app locally.

View your app in AI Studio: https://ai.studio/apps/drive/1FYCytLgbj6ZjOXVkoF3KKCMP6EaI2Ea3

## Run Locally

**Prerequisites:**  Node.js


1. Install dependencies:
   `npm install`
2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key
3. Run the app:
   `npm run dev`

================
File: tsconfig.json
================
{
  "compilerOptions": {
    "target": "ES2022",
    "experimentalDecorators": true,
    "useDefineForClassFields": false,
    "module": "ESNext",
    "lib": [
      "ES2022",
      "DOM",
      "DOM.Iterable"
    ],
    "skipLibCheck": true,
    "types": [
      "node"
    ],
    "moduleResolution": "bundler",
    "isolatedModules": true,
    "moduleDetection": "force",
    "allowJs": true,
    "jsx": "react-jsx",
    "paths": {
      "@/*": [
        "./*"
      ]
    },
    "allowImportingTsExtensions": true,
    "noEmit": true
  }
}





================================================================
End of Codebase
================================================================
